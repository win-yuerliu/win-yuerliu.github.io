<html>
<head>
<title>PHP 测试</title>
</head>
<bod<?php
/*
Template Name: 下载页面
*/
get_header();
?>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
            <div class="post">
                <h1 class="post-title"><?php the_title(); ?></h1>
                <div class="post-content">
                    <?php the_content(); ?>
                    <?php
                    // 获取自定义字段的值
                    $download_type = get_post_meta(get_the_ID(), 'download_type', true);
                    $download_url = get_post_meta(get_the_ID(), 'download_url', true);
                    $download_vip = get_post_meta(get_the_ID(), 'download_vip', true);
                    // 判断是否需要 VIP 权限下载
                    if ($download_vip == 'yes') {
                        // 判断用户是否登录
                        if (is_user_logged_in()) {
                            // 获取当前用户的 ID 和 VIP 等级
                            $user_id = get_current_user_id();
                            $user_vip = get_user_meta($user_id, 'vip_level', true);
                            // 判断用户是否有 VIP 等级
                            if ($user_vip) {
                                // 显示下载按钮
                                echo '<a href="'.$download_url.'" class="btn btn-primary" target="_blank">点击下载</a>';
                            } else {
                                // 提示用户升级 VIP
                                echo '<p>抱歉，您还不是 VIP 用户，无法下载该资源。</p>';
                                echo '<p>请<a href="'.home_url('/vip/').'">点击这里</a>查看 VIP 套餐并升级。</p>';
                            }
                        } else {
                            // 提示用户登录或注册
                            echo '<p>抱歉，您还没有登录，无法下载该资源。</p>';
                            echo '<p>请<a href="'.wp_login_url().'">点击这里</a>登录或<a href="'.wp_registration_url().'">点击这里</a>注册。</p>';
                        }
                    } else {
                        // 显示下载按钮
                        echo '<a href="'.$download_url.'" class="btn btn-primary" target="_blank">点击下载</a>';
                    }
                    ?>
                </div>
            </div>
            <?php endwhile; endif; ?>
        </div>
    </div>
</div>
<?php get_footer(); ?>

y>

<?php echo '<p>Hello World</p>'; ?>

</body>
</html> 
<!DOCTYPE html> <!-- 声明文档类型为 HTML -->
<html lang="zh-CN"> <!-- 标记 HTML 文档的开始，设置语言为中文 -->
<head> <!-- 标记 HTML 文档的头部区域 -->
    <meta charset="UTF-8"> <!-- 设置文档的字符编码为 UTF-8 -->
    <title>楠格</title> <!-- 设置文档的标题为 楠格 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 设置视口的宽度和缩放比例 -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge"> <!-- 设置 IE 浏览器的兼容模式 -->
    <link rel="stylesheet" href="./css/style.css"> <!-- 引入外部样式表文件 style.css -->
</head> <!-- 标记 HTML 文档的头部区域的结束 -->
<body> <!-- 标记 HTML 文档的主体区域 -->
    <div class="container"> <!-- 创建一个类名为 container 的容器元素 -->
        <div class="bg"></div> <!-- 创建一个类名为 bg 的元素，用于显示背景图片 -->
        <div class="content"> <!-- 创建一个类名为 content 的元素，用于显示主要内容 -->
            <div class="avatar"> <!-- 创建一个类名为 avatar 的元素，用于显示头像图片 -->
                <img src="./img/avatar.jpg" alt=""> <!-- 插入头像图片，设置图片的源地址和替代文本 -->
            </div>
            <div class="name">楠格</div> <!-- 创建一个类名为 name 的元素，用于显示姓名 -->
            <div class="desc">一个喜欢编程的小伙子</div> <!-- 创建一个类名为 desc 的元素，用于显示个人描述 -->
            <div class="social"> <!-- 创建一个类名为 social 的元素，用于显示社交账号链接 -->
                <a href="https://github.com/XOS" target="_blank"><img src="./img/github.png" alt=""></a> <!-- 创建一个链接到 GitHub 账号的超链接，设置链接的目标地址和打开方式，插入 GitHub 图标图片，设置图片的源地址和替代文本 -->
                <a href="https://weibo.com/u/1791812193" target="_blank"><img src="./img/weibo.png" alt=""></a> <!-- 创建一个链接到微博账号的超链接，设置链接的目标地址和打开方式，插入微博图标图片，设置图片的源地址和替代文本 -->
                <a href="https://www.zhihu.com/people/xos" target="_blank"><img src="./img/zhihu.png" alt=""></a> <!-- 创建一个链接到知乎账号的超链接，设置链接的目标地址和打开方式，插入知乎图标图片，设置图片的源地址和替代文本 -->
                <a href="https://blog.nan.ge" target="_blank"><img src="./img/blog.png" alt=""></a> <!-- 创建一个链接到博客网站的超链接，设置链接的目标地址和打开方式，插入博客图标图片，设置图片的源地址和替代文本 -->
            </div>
        </div>
    </div>
    <script src="./js/script.js"></script> <!-- 引入外部脚本文件 script.js -->
</body> <!-- 标记 HTML 文档的主体区域的结束 -->
</html> <!-- 标记 HTML 文档的结束 -->
<?php
/*
Template Name: 下载页面
*/
get_header();
?>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
            <div class="post">
                <h1 class="post-title"><?php the_title(); ?></h1>
                <div class="post-content">
                    <?php the_content(); ?>
                    <?php
                    // 获取自定义字段的值
                    $download_type = get_post_meta(get_the_ID(), 'download_type', true);
                    $download_url = get_post_meta(get_the_ID(), 'download_url', true);
                    $download_vip = get_post_meta(get_the_ID(), 'download_vip', true);
                    // 判断是否需要 VIP 权限下载
                    if ($download_vip == 'yes') {
                        // 判断用户是否登录
                        if (is_user_logged_in()) {
                            // 获取当前用户的 ID 和 VIP 等级
                            $user_id = get_current_user_id();
                            $user_vip = get_user_meta($user_id, 'vip_level', true);
                            // 判断用户是否有 VIP 等级
                            if ($user_vip) {
                                // 显示下载按钮
                                echo '<a href="'.$download_url.'" class="btn btn-primary" target="_blank">点击下载</a>';
                            } else {
                                // 提示用户升级 VIP
                                echo '<p>抱歉，您还不是 VIP 用户，无法下载该资源。</p>';
                                echo '<p>请<a href="'.home_url('/vip/').'">点击这里</a>查看 VIP 套餐并升级。</p>';
                            }
                        } else {
                            // 提示用户登录或注册
                            echo '<p>抱歉，您还没有登录，无法下载该资源。</p>';
                            echo '<p>请<a href="'.wp_login_url().'">点击这里</a>登录或<a href="'.wp_registration_url().'">点击这里</a>注册。</p>';
                        }
                    } else {
                        // 显示下载按钮
                        echo '<a href="'.$download_url.'" class="btn btn-primary" target="_blank">点击下载</a>';
                    }
                    ?>
                </div>
            </div>
            <?php endwhile; endif; ?>
        </div>
    </div>
</div>
<?php get_footer(); ?>
